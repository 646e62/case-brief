var solexHighlighterDefaultNavBar=function(b){return function(){var c=function(a){},g=window.console||{log:c,error:c,debug:c,info:c};g.log=g.log||c;g.info=g.info||c;g.error=g.error||c;g.debug=g.debug||c;var h={allTermsByTermIndex:[],terms:{},backgroundColor:"#0068A5",hideCallback:function(){},showCallback:function(){},ratioCenterDisplay:"of",timeout:1E3,initTop:25,followScroll:!1,showMissingTerms:!1},a={settings:{},terms:{},nohlClass:"solexNohl",highlighter:void 0,barOpen:!0,activeTerms:[],disabledTerms:[],
filteredTerms:{},mobileDevice:!1},x=function(){b(window).resize(function(){w(a.navigationBar);w(a.reOpenButton)});b(window).scroll(function(){n()})},n=function(){if(!0!==a.mobileDevice&&!1!==a.settings.followScroll){var m=b(a.navigationBar).add(a.reOpenButton);b(window).scrollTop()>a.settings.initTop?m.css("top",""):m.css("top",a.settings.initTop+"px")}},d=function(){var a=b("\x3cdiv id\x3d'lexumSolrButtonContainer' class\x3d'lexumSolrHi link' \x3e\x3ci id\x3d'lexumSolrButton' class\x3d'lexumSolrHoverColor solex-icon-plus-squared'\x3e\x3c/i\x3e\x3c/div\x3e");
r(a);b("body").append(a);return a},k=function(){var a=b("\x3cdiv id\x3d'solrHiBar' class\x3d'lexumSolrHi' \x3e \x3cspan id\x3d'lexumSolrNavButton' \x3e\x26nbsp;\x3cspan id\x3d'lexumSolrCountRatio' \x3e\x3cspan id\x3d'lexumSolrPosition' \x3e0\x3c/span\x3e\x3cspan id\x3d'lexumSolrRatioCenterDisplay' \x3e\x3c/span\x3e\x3cspan id\x3d'lexumSolrCount' \x3e0\x3c/span\x3e\x26nbsp;\x3c/span\x3e\x3cspan class\x3d'lexumSolrHoverColor btn lexumSolrArrow lexumSolrArrowLeft lexumSolrHoverColor link' id\x3d'lexumSolrPrev' \x3e\x3ci class\x3d'solex-icon-left-big'\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d'lexumSolrHoverColor btn lexumSolrArrow lexumSolrArrowRight lexumSolrHoverColor link' id\x3d'lexumSolrNext' \x3e\x3ci class\x3d'solex-icon-right-big'\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan id\x3d'lexumSolrToggle' class\x3d'link lexumSolrHoverColor' \x3e\x26times;\x3c/span\x3e\x3c/span\x3e\x3cspan id\x3d'solrHiBarTerms' \x3e\x3c/span\x3e\x3c/div\x3e");
a.css("visibility","hidden");b("body").append(a);return a},p=function(){var m=b(a.navigationBar).add(a.reOpenButton),m=m.add(m.find("*"));m.attr("unselectable","on").bind("selectstart",function(){return!1});a.toggleButton=a.navigationBar.find("#lexumSolrToggle");b(a.toggleButton).click(function(a){a.preventDefault();y()});b(a.reOpenButton).click(function(a){a.preventDefault();y()});a.settings.prevButton=b(a.navigationBar).find("#lexumSolrPrev");b(a.settings.prevButton).click(function(b){b.preventDefault();
a.highlighter.scrollPrevious()});a.settings.nextButton=b(a.navigationBar).find("#lexumSolrNext");b(a.settings.nextButton).click(function(b){b.preventDefault();a.highlighter.scrollNext()})},w=function(m){var d=a.highlighter.highlightableItemsMetrics(),f=Math.max(b(window).width()-d.maxRight,5),d=Math.min(d.maxWidth,b(window).width());m.css({right:f+"px","max-width":d+"px"})},r=function(a){a.css("opacity","0");a.css("visibility","hidden")},v=function(a){a.css("opacity","1");a.css("visibility","")},
y=function(){a.barOpen?(r(a.navigationBar),v(a.reOpenButton),a.highlighter.setActiveTerms(a.disabledTerms),a.settings.hideCallback()):(r(a.reOpenButton),v(a.navigationBar),a.highlighter.setActiveTerms(a.activeTerms),a.settings.showCallback());a.barOpen=!a.barOpen};return{init:function(m,c){b.extend(a.settings,h,m);a.highlighter=c;a.terms=b.extend(!0,{},a.settings.terms);/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(g.info("Mobile device"),a.mobileDevice=!0);
var f=!1,l=0;b.each(a.terms,function(b,d){d.isPresentInDocument?(f=!0,l++):a.settings.showMissingTerms&&(f=!0);a.activeTerms.push(!d.isStopWord&&d.isPresentInDocument);a.disabledTerms.push(!1)});f?(a.reOpenButton=d(),a.navigationBar=k(),a.innerNavBar=a.navigationBar.find("#solrHiBarTerms"),a.countDisplay=a.navigationBar.find("#solrHiBar #count"),a.positionDisplay=a.navigationBar.find("#solrHiBar #position"),a.lexumSolrCount=a.navigationBar.find("#lexumSolrCount"),a.lexumSolrPosition=a.navigationBar.find("#lexumSolrPosition"),
p(),b(a.navigationBar).add(a.reOpenButton).css("background-color",a.settings.backgroundColor),b.each(a.terms,function(d,c){if(!a.settings.showMissingTerms&&!c.isPresentInDocument)return!0;c.isPresentInDocument||(c.cssClass="solexT"+l);c=b("\x3clabel id\x3d'solexTerm"+d+"' class\x3d'lexumSolrTermLabel lexumSolrTermInBar "+c.cssClass+"' for\x3d'lexumSolrCheck"+d+"' \x3e\x3cinput id\x3d'lexumSolrCheck"+d+"' type\x3d'checkbox' termid\x3d'"+d+"' /\x3e "+c.label+"\x3c/label\x3e");var f=b(c).find("input");
a.activeTerms[d]?f.attr("checked","checked"):c.addClass(a.nohlClass);b(f).change(function(){var d=f.attr("termid"),c=void 0===f?!1:f.is(":checked");a.activeTerms[d]=c;d=b("#solexTerm"+d);c?d.removeClass(a.nohlClass):d.addClass(a.nohlClass);a.highlighter.setActiveTerms(a.activeTerms)});a.innerNavBar.append(c)}),n(),a.navigationBar.find("#lexumSolrRatioCenterDisplay").html(" "+a.settings.ratioCenterDisplay+" "),w(a.navigationBar),w(a.reOpenButton),v(a.navigationBar),x(),a.highlighter.setActiveTerms(a.activeTerms)):
g.info("Nothing to highlight, exit")},setCurrentTermIndex:function(b,d){a.lexumSolrPosition.html(b);a.lexumSolrPosition.css("min-width",String(b).length+"ex");a.lexumSolrCount.html(d);a.lexumSolrCount.css("min-width",String(d).length+"ex")},setHideCallback:function(b){a.settings.hideCallback=b},setShowCallback:function(b){a.settings.showCallback=b}}}}(jQuery),solexHighlighterScrollWindowProxy=function(b){return function(){var c=void 0,g=!1,h=null,a=null,x=function(){var a=null==c?{top:0,left:0}:b(c).offset(),
d=b(window);return{window:{width:d.width(),height:d.height(),scrollTop:d.scrollTop()},frame:{left:a.left,top:a.top}}};return{initScrollProxy:function(a,d,k){c=a;h=k;b(window).scroll(function(){g||d(x())})},scroll:function(c){g=!0;var d=b("body");d.hasClass("noWebKitSelect")||d.addClass("noWebKitSelect");void 0!==a&&clearTimeout(a);a=setTimeout(function(){g=!1;d.hasClass("noWebKitSelect")&&b("body").removeClass("noWebKitSelect")},h);var k=b("body,html");k.stop(!0,!1);k.animate({scrollTop:c})},getWindowMetrics:x}}}(jQuery);
(function(b){b.highlightNavigationBar=function(c,g){var h=function(a){},a=window.console||{log:h,error:h,debug:h,info:h};a.log=a.log||h;a.info=a.info||h;a.error=a.error||h;a.debug=a.debug||h;var x={allTermsByTermIndex:[],terms:{},backgroundColor:"#0068A5",timeout:1E3,scrollWindow:b(window),navBar:void 0},n=b(c),d={},k=[],p=-1,w={},r=0,v=-1,y="none",m={},A=void 0,f=void 0,l=void 0,D=[];this.setHideCallback=function(a){l.setHideCallback(a)};this.setShowCallback=function(a){l.setShowCallback(a)};this.init=
function(){b.extend(d,x,g);var a=b(d.scrollWindow)[0],t=null;a!=window&&(t=n[0].ownerDocument,t=(t.defaultView||t.parentWindow).frameElement);A=a.solexHighlighterScrollWindowProxy();A.initScrollProxy(t,E,d.timeout);D=n.find(".solexLeft");z();J();L();f=void 0};var z=function(a){void 0===a&&(a=A.getWindowMetrics());f=a},J=function(){l=d.navBar;void 0===l&&(l=b(d.scrollWindow)[0].solexHighlighterDefaultNavBar());!1 in l&&(l.setHideCallback=function(a){});!1 in l&&(l.setShowCallback=function(a){});l.init(g,
{scrollNext:F,scrollPrevious:G,setActiveTerms:M,highlightableItemsMetrics:K});l.setCurrentTermIndex(r,v)},K=function(){z();var a=0,t=0;n.each(function(){a=Math.max(a,u(b(this)).left+b(this).outerWidth());t=Math.max(t,b(this).width())});f=void 0;return{maxRight:a,maxWidth:t}},L=function(){b(document).keypress(function(a){13===a.which&&document.activeElement===document.body&&(a.preventDefault(),a.shiftKey?G():F())})},u=function(a){a=b(a);a=b.extend({},a.offset());a.top+=f.frame.top;a.left+=f.frame.left;
return a},H=function(a){var e=f.window.scrollTop,N=e+f.window.height,d=u(a).top;return d+b(a).height()<=N&&d>=e},M=function(a){b.each(a,function(a,b){if(k[a]!=b){var e=n.find("."+d.terms[a].cssClass);b?e.removeClass("solexNohl"):e.addClass("solexNohl");k[a]=b}});O();r=0;l.setCurrentTermIndex(r,v);I(n.find(".solexG"+p));setTimeout(E,0)},P=function(a,d){var e=m[d];void 0===e&&(e=[],b.each(a,function(a,d){b(d).hasClass("solexNohl")||e.push(b(d))}),m[d]=e);return e},E=function(a){z(a);var e=Math.random().toString();
y=e;a=f.window.scrollTop+Math.ceil(f.window.height/2);for(var d=P(D,k.toString()),c=0,q=d.length;1<q-c;){if(e!==y)return;var g=Math.floor((q-c)/2),h=u(d[c+g]).top;a>h?c+=g:q-=g}!1!==c in d&&(e=d[c],1<d.length-c&&(d=d[c+1],c=u(e).top,q=u(d).top,Math.abs(a-q)<Math.abs(a-c)&&H(d)&&(e=d)),!1===H(e)&&u(e).top>a||(a=b(e)[0].id.match(/[0-9]+/),a=parseInt(a),B(a,!1),f=void 0))},Q=function(a){var e=b(a[0]),c=p,f=k.toString(),q=e.data(f);void 0===q&&(q=0,b.each(d.allTermsByTermIndex,function(a,b){!1===k[b]||
a>c||q++}),e.data(f,q));b.each(a,function(a,e){0!==e.length&&(e=b(e),e.addClass("solexCurrentTerm"))});r=q},O=function(){var a=k.toString(),c=w[a];void 0===c&&(c=0,b.each(d.allTermsByTermIndex,function(a,b){k[b]&&c++}),w[a]=c);v=c},I=function(a){a&&b.each(a,function(a,e){0!==e.length&&(e=b(e),e.removeClass("solexCurrentTerm"),e.css("background-color",""))});p=-1},B=function(a,b){if(!(0>a)&&a!==p){var e=n.find(".solexG"+a),d=n.find(".solexG"+p),c=e[0];I(d);p=a;0!==c.length&&(b&&C(c),R(e,-120),Q(e));
l.setCurrentTermIndex(r,v)}},R=function(a,d){a&&b.each(a,function(a,e){if(0!==e.length){a=e=b(e);var c=a.data("solrOriBack");void 0===c&&(c=a.css("background-color"),(0===c.indexOf("#")||/\d/.test(c))&&a.data("solrOriBack",c));c=a=c;0===a.indexOf("#")&&(c="rgb("+S(a).toString()+")");a=c.match(/[0-9]+/g);a="rgb("+Math.max(0,parseInt(a[0])+d)+", "+Math.max(0,parseInt(a[1])+d)+", "+Math.max(0,parseInt(a[2])+d)+")";e.css("background-color",a)}})},C=function(a){a=u(a).top-Math.ceil(f.window.height/2);
A.scroll(a)},F=function(){z();var a=n.find("#solexG"+p+"-0"),c;if(c=0!==a.length&&!1===a.hasClass("solexNohl"))c=f.window.scrollTop+f.window.height,c=1==u(a).top+b(a).height()>c;if(c)C(a);else{a:{for(a=p+1;a<d.allTermsByTermIndex.length;a++)if(k[d.allTermsByTermIndex[a]])break a;a=-1}B(a,!0)}f=void 0},G=function(){z();var a=n.find("#solexG"+p+"-0"),b;if(b=0!==a.length&&!1===a.hasClass("solexNohl"))b=f.window.scrollTop,b=1==u(a).top<b;if(b)C(a);else{a:{for(a=p-1;0<=a;a--)if(k[d.allTermsByTermIndex[a]])break a;
a=-1}B(a,!0)}f=void 0},S=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,d){return b+b+c+c+d+d});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null};this.init()};b.fn.highlightNavigationBar=function(c){return this.each(function(){if(void 0===b(this).data("highlightNavigationBar")){var g=new b.highlightNavigationBar(b(this),c);b(this).data("highlightNavigationBar",g)}})};b.initHighlightNavigationBar=function(c,
g){var h=b("body");void 0===h.data("highlightNavigationBar")&&(c=new b.highlightNavigationBar(b(c),g),h.data("highlightNavigationBar",c))}})(jQuery);